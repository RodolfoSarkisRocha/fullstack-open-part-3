(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},22:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),l=(n(22),n(16)),i=n(5),u=n(2),m=n(4),s=function(e){var t=e.text;return r.a.createElement("h2",null,t)},d=function(e){var t=e.person,n=e.onDelete;return r.a.createElement("div",{style:{marginBottom:10},key:t.id},r.a.createElement("div",null,"Name: ".concat(t.name)),r.a.createElement("div",null,"Number: ".concat(t.number)),r.a.createElement("button",{onClick:function(){return n(t)}},"Delete"),r.a.createElement("div",{style:{marginTop:10,borderBottom:"1px solid black"}}))},f=function(e){var t=e.persons,n=void 0===t?[]:t,a=e.onDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{text:"Numbers"}),n.map((function(e){return r.a.createElement(d,{key:e.id,person:e,onDelete:a})})))},b=function(e){var t=e.onSubmit,n=e.handleInputChange,a=e.contactFields;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{text:"Create new person"}),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{style:{marginBottom:10}},r.a.createElement("label",null,"Name: "),r.a.createElement("input",{value:a.name,name:"name",onChange:n})),r.a.createElement("div",{style:{marginBottom:10}},r.a.createElement("label",null,"Number: "),r.a.createElement("input",{value:a.number,name:"number",onChange:n})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add"))))},p=function(e){var t=e.filterValue,n=e.filterName,a=e.handleFilter;return r.a.createElement("div",{style:{marginBottom:10}},r.a.createElement("label",null,n,": "),r.a.createElement("input",{value:t,onChange:a}))},h=n(3),E=n.n(h),g="https://fso-phonebook-backend-node.herokuapp.com/api/people",v={backgroundColor:"#f6ffed",border:"1px solid #b7eb8f",color:"#52c41a",transition:"opacity 2s linear",height:"30px",padding:5,opacity:1},y={backgroundColor:"#fff1f0",border:"1px solid #ffa39e",color:"#f5222d",padding:5,height:"30px",opacity:1},x={width:"100%",borderRadius:5,boxSizing:"border-box",height:0,opacity:0,transition:"opacity 2s linear",textAlign:"center"},j=function(e){var t=e.message,n=e.type,a={success:v,error:y},o=Object(u.a)(Object(u.a)({},x),a[n]);return r.a.createElement("div",{style:o},t)},O={padding:10,boxSizing:"border-box",width:"100%"},k=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({name:"",number:""}),d=Object(m.a)(c,2),h=d[0],v=d[1],y=Object(a.useState)(""),x=Object(m.a)(y,2),k=x[0],w=x[1],S=Object(a.useState)({message:null,type:null}),C=Object(m.a)(S,2),N=C[0],B=C[1];Object(a.useEffect)((function(){E.a.get(g).then((function(e){return e.data})).then((function(e){return o(e)})).catch((function(e){return F("It was impossible to retrieve notes","error")}))}),[]);var F=function(e,t){B({message:e,type:t}),setTimeout((function(){B({message:null,type:null})}),5e3)};return r.a.createElement("div",{style:O},r.a.createElement(s,{text:"Phonebook"}),r.a.createElement(j,{message:N.message,type:N.type}),r.a.createElement(s,{text:"Filters"}),r.a.createElement(p,{filterValue:k,filterName:"Name",handleFilter:function(e){var t=e.target.value.trim();w(t)}}),r.a.createElement(b,{onSubmit:function(e){e.preventDefault();var t,a=h.name,r=h.number;[a,r].some((function(e){return""===e.trim()||null===e||void 0===e}))?F("Both fields are required!","error"):(t={name:a,number:r},new Promise((function(e,n){return E.a.post(g,t).then((function(t){return e(t.data)})).catch((function(e){return n(e.response.data.error)}))}))).then((function(e){o(n.concat(e)),v({name:"",number:""}),F("Sucessfully added ".concat(a," to the list!"),"success")})).catch((function(e){return F(e,"error")}))},handleInputChange:function(e){var t=e.target.value,n=e.target.name;v(Object(u.a)(Object(u.a)({},h),{},Object(i.a)({},n,t)))},contactFields:h}),r.a.createElement(f,{persons:k?n.filter((function(e){var t=e.name.toLowerCase(),n=k.toLowerCase();return t.includes(n)})):n,onDelete:function(e){var t=e.id,a=Object(l.a)(e,["id"]);window.confirm("Are you sure you want to delete ".concat(a.name,"?"))&&function(e){return E.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))}(t).then((function(){o(n.filter((function(e){return e.id!==t}))),F("Succesfully deleted ".concat(a.name))})).catch((function(){F("It was impossible to delete the person with name ".concat(a.name),"error")}))}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.95c09a9e.chunk.js.map